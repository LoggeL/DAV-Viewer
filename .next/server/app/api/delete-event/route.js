(()=>{var e={};e.id=225,e.ids=[225],e.modules={399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},4026:e=>{"use strict";e.exports=require("string_decoder")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},8150:()=>{},3895:(e,t,r)=>{"use strict";r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>c});var n={};r.r(n),r.d(n,{POST:()=>l});var o=r(9303),s=r(8716),a=r(3131),i=r(7070),u=r(8097);async function l(e){try{let t=await e.json();if((0,u.xf)(t)){(0,u.LO)();let{calendarObjectUrl:e}=t;if(!e)return i.NextResponse.json({error:"calendarObjectUrl ist erforderlich"},{status:400});let r=e.split("/").slice(0,3).join("/"),n=u.Ig.events.get(r)||[],o=n.findIndex(t=>t.href===e);return -1!==o&&n.splice(o,1),u.Ig.events.set(r,n),i.NextResponse.json({ok:!0})}(0,u.R4)(t);let{serverUrl:r,username:n,password:o,calendarObjectUrl:s,etag:a}=t;if(!s)return i.NextResponse.json({error:"calendarObjectUrl ist erforderlich"},{status:400});let l=await (0,u.kH)({serverUrl:r,username:n,password:o});return await l.deleteCalendarObject({url:s,etag:a}),i.NextResponse.json({ok:!0})}catch(e){return i.NextResponse.json({error:e.message||"Fehler"},{status:e.status||500})}}let d=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/delete-event/route",pathname:"/api/delete-event",filename:"route",bundlePath:"app/api/delete-event/route"},resolvedPagePath:"/workspace/app/api/delete-event/route.js",nextConfigOutput:"",userland:n}),{requestAsyncStorage:p,staticGenerationAsyncStorage:c,serverHooks:m}=d,f="/api/delete-event/route";function v(){return(0,a.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:c})}},8097:(e,t,r)=>{"use strict";r.d(t,{Ig:()=>i,Jp:()=>c,LO:()=>u,R4:()=>l,kH:()=>d,ke:()=>p,vk:()=>m,xf:()=>a});var n=r(9394),o=r(1625);let s="1"===process.env.DEMO||"1"===process.env.DEMO_MODE;function a(e){return!!s||!!e&&(!0===e.demo||"string"==typeof e.serverUrl&&"demo"===e.serverUrl.trim().toLowerCase())}let i={calendars:[{url:"demo://work",displayName:"Work",ctag:"1",color:"#3b82f6"},{url:"demo://personal",displayName:"Personal",ctag:"1",color:"#22c55e"}],events:new Map};function u(){if(i.events.size>0)return;let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),9,0,0,0),r=(e,r,n=1,o="Meeting",s=!1)=>{let a=new Date(t.getTime()+864e5*r),i=new Date(a.getTime()+36e5*n),u=m(10);return{href:`${e}/evt-${u}.ics`,etag:`"${m(6)}"`,uid:u,summary:o,description:"",location:"",start:a.toISOString(),end:i.toISOString(),allDay:s}};i.events.set("demo://work",[r("demo://work",-2,1,"Sync mit Team"),r("demo://work",-1,2,"Projekt Kickoff"),r("demo://work",0,1,"1:1 Check-in"),r("demo://work",1,1,"Architektur-Review"),r("demo://work",3,2,"Sprint Planung")]),i.events.set("demo://personal",[r("demo://personal",0,0,"Geburtstag",!0),r("demo://personal",2,1,"Arzttermin"),r("demo://personal",4,1,"Laufen im Park"),r("demo://personal",6,2,"Familienessen"),r("demo://personal",-3,1,"Einkaufen")])}function l(e){if(a(e))return;let{serverUrl:t,username:r,password:n}=e||{};if(!t||!r||!n){let e=Error("serverUrl, username und password sind erforderlich");throw e.status=400,e}}async function d({serverUrl:e,username:t,password:r}){let n=await (0,o.G6)({serverUrl:e,credentials:{username:t,password:r},authMethod:"Basic",defaultAccountType:"caldav"});return await n.login(),n}function p(e){try{let t=n.Z.parse(e),r=new n.Z.Component(t).getFirstSubcomponent("vevent");if(!r)return null;let o=new n.Z.Event(r);return{uid:o.uid,summary:o.summary||"",description:o.description||"",location:o.location||"",start:o.startDate?o.startDate.toJSDate():null,end:o.endDate?o.endDate.toJSDate():null,allDay:!!o.startDate&&o.startDate.isDate}}catch(e){return null}}function c({uid:e,summary:t,description:r,location:o,start:s,end:a,allDay:i}){let u=new n.Z.Component(["vcalendar",[],[]]);u.updatePropertyWithValue("prodid","-//CalDAV Webapp//EN"),u.updatePropertyWithValue("version","2.0");let l=new n.Z.Component("vevent"),d=new n.Z.Event(l);e&&(d.uid=e);let p=new Date(s),c=new Date(a);if(i){let e=n.Z.Time.fromJSDate(p,!1);e.isDate=!0;let t=n.Z.Time.fromJSDate(c,!1);t.isDate=!0,d.startDate=e,d.endDate=t}else{let e=n.Z.Time.fromJSDate(p,!0),t=n.Z.Time.fromJSDate(c,!0);d.startDate=e,d.endDate=t}return d.summary=t||"",d.description=r||"",d.location=o||"",u.addSubcomponent(l),u.toString()}function m(e=16){let t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",r="";for(let n=0;n<e;n++)r+=t[Math.floor(Math.random()*t.length)];return r}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[276,801],()=>r(3895));module.exports=n})();